-- Tag at start
loadstring(game:HttpGet("https://raw.githubusercontent.com/Something478/DevTools/main/Tag"))()

-- Services
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- =================== GUI ===================
local PlasmaMapUI = Instance.new("ScreenGui")
PlasmaMapUI.Name = "PlasmaMapUI"
PlasmaMapUI.ResetOnSpawn = false
PlasmaMapUI.Parent = game:GetService("CoreGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 220, 0, 130)
Frame.Position = UDim2.new(0, 20, 0, 200)
Frame.BackgroundColor3 = Color3.fromRGB(15,10,35)
Frame.BorderSizePixel = 2
Frame.BorderColor3 = Color3.fromRGB(0,170,255)
Frame.Parent = PlasmaMapUI

-- Make GUI draggable
Frame.Active = true
Frame.Draggable = true

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,0,30)
Title.BackgroundTransparency = 1
Title.Text = "‚òÑÔ∏è PlasmaMap"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(0,170,255)
Title.Parent = Frame

local SprintBtn = Instance.new("TextButton")
SprintBtn.Size = UDim2.new(1,-20,0,40)
SprintBtn.Position = UDim2.new(0,10,0,40)
SprintBtn.Text = "üöÄ Sprint: OFF"
SprintBtn.Font = Enum.Font.GothamBold
SprintBtn.TextSize = 16
SprintBtn.BackgroundColor3 = Color3.fromRGB(30,20,60)
SprintBtn.BorderSizePixel = 2
SprintBtn.BorderColor3 = Color3.fromRGB(0,170,255)
SprintBtn.TextColor3 = Color3.fromRGB(200,200,255)
SprintBtn.Parent = Frame

local LightingBtn = Instance.new("TextButton")
LightingBtn.Size = UDim2.new(1,-20,0,40)
LightingBtn.Position = UDim2.new(0,10,0,90)
LightingBtn.Text = "üí° Space Lighting: ON"
LightingBtn.Font = Enum.Font.GothamBold
LightingBtn.TextSize = 16
LightingBtn.BackgroundColor3 = Color3.fromRGB(30,20,60)
LightingBtn.BorderSizePixel = 2
LightingBtn.BorderColor3 = Color3.fromRGB(0,170,255)
LightingBtn.TextColor3 = Color3.fromRGB(200,200,255)
LightingBtn.Parent = Frame

-- =================== Player Position ===================
local playerPosition = Vector3.new(0,0,0)
if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
    playerPosition = LocalPlayer.Character.HumanoidRootPart.Position
end

-- =================== Lighting ===================
local originalLighting = {
    Ambient = Lighting.Ambient,
    OutdoorAmbient = Lighting.OutdoorAmbient,
    FogColor = Lighting.FogColor,
    FogEnd = Lighting.FogEnd,
    Brightness = Lighting.Brightness,
    GlobalShadows = Lighting.GlobalShadows
}

local shadowsEnabled = true
local function applySpaceLighting()
    Lighting.Ambient = Color3.fromRGB(60,35,100)
    Lighting.OutdoorAmbient = Color3.fromRGB(60,35,100)
    Lighting.FogColor = Color3.fromRGB(30,10,60)
    Lighting.FogEnd = 2500
    Lighting.Brightness = 0.2
    Lighting.GlobalShadows = shadowsEnabled
end

local function applyNormalLighting()
    for k,v in pairs(originalLighting) do
        Lighting[k] = v
    end
end

applySpaceLighting()

-- Space Skybox
local sky = Lighting:FindFirstChildOfClass("Sky") or Instance.new("Sky")
sky.SkyboxBk = "http://www.roblox.com/asset/?id=159454299"
sky.SkyboxDn = "http://www.roblox.com/asset/?id=159454299"
sky.SkyboxFt = "http://www.roblox.com/asset/?id=159454299"
sky.SkyboxLf = "http://www.roblox.com/asset/?id=159454299"
sky.SkyboxRt = "http://www.roblox.com/asset/?id=159454299"
sky.SkyboxUp = "http://www.roblox.com/asset/?id=159454299"
sky.StarCount = 5000
if not sky.Parent then sky.Parent = Lighting end

-- =================== Map Creation ===================
-- Remove existing map
for _, obj in pairs(workspace:GetChildren()) do
    if obj.Name == "PlasmaMapIsland" then obj:Destroy() end
end

local island = Instance.new("Model")
island.Name = "PlasmaMapIsland"
island.Parent = workspace

-- Platform
local platform = Instance.new("Part")
platform.Name = "NebulaPlatform"
platform.Size = Vector3.new(1200,25,1200)
platform.Position = playerPosition + Vector3.new(0,500,0)
platform.Anchored = true
platform.Material = Enum.Material.Neon
platform.Color = Color3.fromRGB(15,3,35)
platform.Reflectance = 0.1
platform.Parent = island

-- Observatory
local observatory = Instance.new("Part")
observatory.Name = "Observatory"
observatory.Size = Vector3.new(80,30,80)
observatory.Position = playerPosition + Vector3.new(0,515,0)
observatory.Anchored = true
observatory.Material = Enum.Material.Metal
observatory.Color = Color3.fromRGB(45,45,65)
observatory.Parent = island

-- Dome
local dome = Instance.new("Part")
dome.Shape = Enum.PartType.Ball
dome.Size = Vector3.new(70,30,70)
dome.Position = playerPosition + Vector3.new(0,540,0)
dome.Anchored = true
dome.Material = Enum.Material.Glass
dome.Transparency = 0.4
dome.Reflectance = 0.3
dome.Color = Color3.fromRGB(70,120,255)
dome.CanCollide = false
dome.Parent = island

-- Teleport Pad (spawn)
local teleportPad = Instance.new("Part")
teleportPad.Name = "TeleportPad"
teleportPad.Size = Vector3.new(15,2,15)
teleportPad.Position = observatory.Position + Vector3.new(0,16,0)
teleportPad.Anchored = true
teleportPad.Material = Enum.Material.Neon
teleportPad.Color = Color3.fromRGB(0,170,255)
teleportPad.Parent = island

-- Spawn respawn part
local respawnPart = Instance.new("Part")
respawnPart.Name = "RespawnPoint"
respawnPart.Size = Vector3.new(10,1,10)
respawnPart.Position = teleportPad.Position + Vector3.new(0,5,0)
respawnPart.Anchored = true
respawnPart.Transparency = 1
respawnPart.CanCollide = false
respawnPart.Parent = island

-- Teleport player to pad
local function teleportPlayer()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(respawnPart.Position + Vector3.new(0,5,0))
    end
end
teleportPlayer()
LocalPlayer.CharacterAdded:Connect(function(char)
    char:WaitForChild("HumanoidRootPart")
    task.wait(0.1)
    teleportPlayer()
end)

-- =================== Barrier Walls ===================
local barrierHeight = 1000
local barrierRadius = 650
local function createBarrierSegment(position, size)
    local barrier = Instance.new("Part")
    barrier.Size = size
    barrier.Position = position
    barrier.Anchored = true
    barrier.Material = Enum.Material.ForceField
    barrier.Color = Color3.fromRGB(0,100,255)
    barrier.Parent = island
    return barrier
end

-- Circular walls
for i = 1,36 do
    local angle = math.rad(i*(360/36))
    local x = playerPosition.X + math.cos(angle)*barrierRadius
    local z = playerPosition.Z + math.sin(angle)*barrierRadius
    createBarrierSegment(Vector3.new(x,playerPosition.Y+500+barrierHeight/2,z), Vector3.new(10,barrierHeight,10))
end

-- Floor barrier below map
createBarrierSegment(Vector3.new(playerPosition.X,playerPosition.Y+500-50,playerPosition.Z), Vector3.new(1500,10,1500))

-- =================== Space Lighting Toggle ===================
local spaceLightingEnabled = true
LightingBtn.MouseButton1Click:Connect(function()
    spaceLightingEnabled = not spaceLightingEnabled
    if spaceLightingEnabled then
        applySpaceLighting()
        LightingBtn.Text = "üí° Space Lighting: ON"
    else
        applyNormalLighting()
        LightingBtn.Text = "üí° Space Lighting: OFF"
    end
end)

-- =================== Sprint Toggle ===================
local sprintEnabled = false
SprintBtn.MouseButton1Click:Connect(function()
    sprintEnabled = not sprintEnabled
    SprintBtn.Text = sprintEnabled and "üöÄ Sprint: ON" or "üöÄ Sprint: OFF"
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = sprintEnabled and 32 or 16
    end
end)
